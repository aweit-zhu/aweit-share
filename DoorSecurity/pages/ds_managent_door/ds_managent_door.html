<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>

<div class="mx-auto vh-100 overflow-auto w-sm-100" style="width: 100%;">
    <div id="door_list" 
         class="d-flex flex-row align-items-center overflow-auto w-100 border shadow justify-content-start " 
         style="padding-top: 1rem;">
    </div>
    <div class="w-100" style="margin-top: 2rem;">
        <div id="door_info" class="mt-3 d-flex flex-column flex-md-row justify-content-start align-items-center align-items-lg-start d-none">
            <div class="card border border-dark shadow flex-shrink-0 ms-2" style="width: 18rem; height:25rem">
                <img src="" class="door_pic card-img-top">
                <div class="card-body">
                    <h5 class="card-title door_id"></h5>
                    <p class="card-text door_desc"></p>
                </div>
            </div>
            <div class="d-flex flex-row justify-content-center align-items-start mt-3 mt-lg-0 mx-2 w-100 position-relative" style="height:25rem">
                <i class="bi bi-arrow-left-right position-absolute text-dark" style="font-size: 2.5rem; top:45%; font-weight: bolder;"></i>
                <div class="row w-100 h-100">
                    <div class="col-6 shadow">
                        <h5 class="text-center">具有權限的員工</h5>
                        <div id="left" style="height: 90%;" class="" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <!-- <p id="E001" class="border border-2 border-primary rounded-pill shadow p-1 m-1" 
                                         role="button" draggable="true" ondragstart="drag(event)">
                                <i class="bi bi-person"></i>James</p>
                            <p id="E002" class="border border-2 border-primary rounded-pill shadow p-1 m-1" role="button" draggable="true" ondragstart="drag(event)">
                                <i class="bi bi-person"></i>Mavis</p>
                            <p id="E003" class="border border-2 border-primary rounded-pill shadow p-1 m-1" role="button" draggable="true" ondragstart="drag(event)">
                                <i class="bi bi-person"></i>Benson</p> -->
                        </div>
                    </div>
                    <div class="col-6 shadow">
                        <h5 class="text-center">被移除權限的員工</h5>
                        <div id="right" style="height: 90%;" class="" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <!-- <p id="E004" class="border border-2 border-danger rounded-pill shadow p-1 m-1" role="button" draggable="true" ondragstart="drag(event)">
                                <i class="bi bi-person"></i>Yushu</p>
                            <p id="E005" class="border border-2 border-danger rounded-pill shadow p-1 m-1" role="button" draggable="true" ondragstart="drag(event)">
                                <i class="bi bi-person"></i>Rosa</p>
                            <p id="E006" class="border border-2 border-danger rounded-pill shadow p-1 m-1" role="button" draggable="true" ondragstart="drag(event)">
                                <i class="bi bi-person"></i>Weizhi</p> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="m-3 d-flex justify-content-center">
        <button class="btn btn-primary m-3" onclick="submit()">提交</button>
        <button class="btn btn-danger m-3" onclick="reset()">清除</button>
    </div>
    <div class="m-3 d-flex justify-content-center">
    </div>
</div>

<link rel="stylesheet" href="/pages/ds_managent_door/ds_managent_door.css">

<script>loadModule( `/pages/ds_managent_door/ds_managent_door.js`);</script>

<script>

    function allowDrop(event) {
        event.preventDefault();
    }

    function drag(event) {
        event.dataTransfer.setData('employee_name', event.target.innerText);
        event.dataTransfer.setData('employee_id', event.target.id);
    }

    function drop(event) {
        event.preventDefault();
        var employee_name = event.dataTransfer.getData('employee_name');
        var employee_id = event.dataTransfer.getData('employee_id');
        var targetId = event.target.id;
        var sourceId = (targetId == 'right') ? 'left': 'right';
        var employee = document.getElementById(employee_id);
        //console.log(`${employee_name} (${employee_id}) 從 ${sourceId} 到 ${targetId}`);
        document.getElementById(sourceId).removeChild(employee);
        document.getElementById(targetId).appendChild(employee);
    }

</script>