<script src="./components/aweit_ds_door/aweit_ds_door.js"></script>
<style>
    .door {
        background-color: #f5f5f5;
    }
    .door:hover  {
        border: 2px solid black !important;
    }
</style>
<div class=" vh-100 overflow-scroll" style="padding-top: 20px;">
    <div id="doorList" class="d-flex justify-content-center align-items-center" width="500px;"></div>
    <div id="door_info" class="row h-auto mt-3 d-none">
        <div class="col-6">
            <div class="card mx-auto border border-dark shadow" style="width: 18rem; height:25rem">
                <img src="" class="door_pic card-img-top">
                <div class="card-body">
                  <h5 class="card-title door_id"></h5>
                  <p class="card-text door_desc"></p>
                </div>
            </div>
        </div>
        <div class="col-6">
            
        </div>
    </div>
</div>

<script>

    var doorList = [];

    $.ajax({
        async:false,
        url:'./api/ds_door.json',
        dataType: 'json',
        success: function(doors) {
            doorList = doors;   
        }
    });

    doorList.forEach(render); 

    function render(door,index) {
        let ds_door =
         ` 
            <div class="m-2 border door">
                <aweit-ds-door type="door" door_id="${door.door_id}" door_name="${door.door_name}" door_pic="${door.door_pic}" door_desc="${door.door_desc}"></aweit-ds-door>
            </div>
        `;
        $('#doorList').append(ds_door);
    }

    document.querySelectorAll('aweit-ds-door').forEach(register);

    function register(door,index) {
        door.registerClickHandler(() => tap(door));
    }

    function tap(door) {
        let door_id = door.getAttribute('door_id');
        let door_name = door.getAttribute('door_name');
        let door_pic = door.getAttribute('door_pic');
        let door_desc = door.getAttribute('door_desc');
        $('#door_info').removeClass('d-none');
        $('#door_info .door_id').html(`${door_id}(${door_name})`);
        $('#door_info .door_pic').attr('src',door_pic);
        $('#door_info .door_desc').html(`${door_desc}`);
    }

</script>